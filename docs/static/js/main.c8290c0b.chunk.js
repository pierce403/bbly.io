(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1024:function(e,t){},1061:function(e,t){},1078:function(e,t){},1335:function(e,t){},1382:function(e,t){},1406:function(e,t){},1443:function(e,t){},1466:function(e,t){},1468:function(e,t){},1479:function(e,t){},1532:function(e,t){},1563:function(e,t){},1627:function(e,t){},1670:function(e,t){},1681:function(e,t){},1683:function(e,t){},1711:function(e,t){},1726:function(e,t){},1759:function(e,t){},1814:function(e,t){},1843:function(e,t,n){"use strict";n.r(t);var a,o=n(10),i=n.n(o),s=n(736),l=n.n(s),r=(n(744),n(195)),c=n(196),m=n(198),u=n(197),p=n(199),b=(n(746),n(737)),f=n.n(b),d=n(738),h=n.n(d),y=0,g=[];function v(){var e=g.slice();return e.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0}),e}function N(e){a.broadcast(e)}null==localStorage.getItem("bubbleList")?(console.log("loading default bubbles"),g=[{title:"Welcome to BBLY.IO!",link:"https://bbly.io",summary:"This site is pretty fun, hope you enjoy it!",score:0,awesome:0,hilarious:0,enlightening:0,solidarity:0,scammy:0,poopy:0,hateful:0,id:"bubble-777"}]):(console.log("loading stored bubbles"),g=JSON.parse(localStorage.getItem("bubbleList")));var E=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={peerCount:0,toggle:!0,topBubbles:v()},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;!function(e){var t=e.onBubbleChange,n=e.onPeerChange,o=new f.a({repo:"ipfs/pubsub-demo/"+Math.random(),EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:["/dns4/wrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star"]}}});o.once("ready",function(){return o.id(function(e,i){if(e)throw e;console.log("IPFS node ready with address "+i.id),(a=h()(o,"bbly-news")).on("peer joined",function(e){console.log("peer "+e+" joined"),n(++y)}),a.on("peer left",function(e){console.log("peer "+e+" left"),n(--y)}),a.on("message",function(e){var n=JSON.parse(e.data.toString());if(console.log(n),"vote"===n.type){for(var a=0;a<g.length;++a)g[a].id===n.id&&("awesome"===n.emotion&&g[a].awesome++,"hilarious"===n.emotion&&g[a].hilarious++,"enlightening"===n.emotion&&g[a].enlightening++,"solidarity"===n.emotion&&g[a].solidarity++,"scammy"===n.emotion&&g[a].scammy++,"poopy"===n.emotion&&g[a].poopy++,"hateful"===n.emotion&&g[a].hateful++,g[a].score=g[a].awesome+g[a].hilarious+g[a].enlightening+g[a].solidarity-g[a].scammy-g[a].poopy-10*g[a].hateful);return console.log("stored "+g.length+" bubbles!"),localStorage.setItem("bubbleList",JSON.stringify(g)),void t()}"story"===n.type&&(g.push({title:n.title,score:0,awesome:0,hilarious:0,enlightening:0,solidarity:0,hateful:0,poopy:0,scammy:0,id:n.id}),t())})})})}({onBubbleChange:function(){e.setState({topBubbles:v()})},onPeerChange:function(t){e.setState({peerCount:t})}})}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(O,null),i.a.createElement("header",{className:"App-header"},"peers: ",this.state.peerCount,i.a.createElement(S,null),i.a.createElement("br",null),i.a.createElement("ul",{className:"list-group"},this.state.topBubbles.map(function(e){return i.a.createElement("li",{key:e.id,className:"list-group-item"},i.a.createElement(w,{title:e.title,score:e.score,awesome:e.awesome,hilarious:e.hilarious,enlightening:e.enlightening,solidarity:e.solidarity,scammy:e.scammy,poopy:e.poopy,hateful:e.hateful,onAwesome:function(){N(JSON.stringify({type:"vote",emotion:"awesome",id:e.id}))},onHilarious:function(){N(JSON.stringify({type:"vote",emotion:"hilarious",id:e.id}))},onEnlightening:function(){N(JSON.stringify({type:"vote",emotion:"enlightening",id:e.id}))},onSolidarity:function(){N(JSON.stringify({type:"vote",emotion:"solidarity",id:e.id}))},onScammy:function(){N(JSON.stringify({type:"vote",emotion:"scammy",id:e.id}))},onPoopy:function(){N(JSON.stringify({type:"vote",emotion:"poopy",id:e.id}))},onHateful:function(){N(JSON.stringify({type:"vote",emotion:"hateful",id:e.id}))}}))}))))}}]),t}(o.Component),w=function(e){function t(){return Object(r.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"card border-secondary mb-3 m-3 text-left"},i.a.createElement("div",{className:"card-body"},i.a.createElement("button",{className:"btn btn-outline-secondary m-1"},this.props.score),i.a.createElement("span",{className:"m-3"},this.props.title),i.a.createElement("br",null),i.a.createElement("button",{className:"btn btn-outline-secondary m-1",onClick:this.props.onAwesome},i.a.createElement("span",{className:"fa fa-grin-stars"}," ",this.props.awesome," ")),i.a.createElement("button",{className:"btn btn-outline-secondary m-1",onClick:this.props.onHilarious},i.a.createElement("span",{className:"fa fa-grin-squint-tears"}," ",this.props.hilarious," ")),i.a.createElement("button",{className:"btn btn-outline-secondary m-1",onClick:this.props.onEnlightening},i.a.createElement("span",{className:"fa fa-lightbulb"}," ",this.props.enlightening," ")),i.a.createElement("button",{className:"btn btn-outline-secondary m-1",onClick:this.props.onSolidarity},i.a.createElement("span",{className:"fa fa-fist-raised"}," ",this.props.solidarity," "))," ",i.a.createElement("button",{className:"btn btn-outline-secondary m-1",onClick:this.props.onScammy},i.a.createElement("span",{className:"fa fa-dollar-sign"}," ",this.props.scammy," ")),i.a.createElement("button",{className:"btn btn-outline-secondary m-1",onClick:this.props.onPoopy},i.a.createElement("span",{className:"fa fa-poop"}," ",this.props.poopy," ")),i.a.createElement("button",{className:"btn btn-outline-secondary m-1",onClick:this.props.onHateful},i.a.createElement("span",{className:"fa fa-skull"}," ",this.props.hateful," "))))}}]),t}(o.Component),O=function(e){function t(){return Object(r.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-secondy"},i.a.createElement("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation"},i.a.createElement("span",{className:"navbar-toggler-icon"})),i.a.createElement("a",{className:"navbar-brand",href:"#!"},"Navbar"),i.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03"},i.a.createElement("ul",{className:"navbar-nav mr-auto mt-2 mt-md-0"},i.a.createElement("li",{className:"nav-item active"},i.a.createElement("a",{className:"nav-link",href:"#!"},"Home ",i.a.createElement("span",{className:"sr-only"},"(current)"))),i.a.createElement("li",{className:"nav-item"},i.a.createElement("a",{className:"nav-link",href:"#!"},"Link")),i.a.createElement("li",{className:"nav-item"},i.a.createElement("a",{className:"nav-link disabled",href:"#!"},"Disabled"))),i.a.createElement("form",{className:"form-inline my-2 my-lg-0"},i.a.createElement("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Search"}))))}}]),t}(o.Component),S=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={value:""},n.handleChange=function(e){n.setState({value:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),console.log("A new story was submitted: "+n.state.value),N(JSON.stringify({type:"story",title:n.state.value,id:"bubble-"+Math.round(1e6*Math.random())}))},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"BubbleBlower"},i.a.createElement("form",{onSubmit:this.handleSubmit,className:"from-inline"},i.a.createElement("div",{className:"input-group mb-2 mr-sm-2 mb-sm-0"},i.a.createElement("input",{type:"text",className:"form-control",id:"inlineFormInputGroup",placeholder:"story title",name:"name",value:this.state.value,onChange:this.handleChange})),i.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-outline-secondary"})))}}]),t}(o.Component),k=E;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},462:function(e,t){},514:function(e,t){},739:function(e,t,n){e.exports=n(1843)},744:function(e,t,n){},746:function(e,t,n){},833:function(e,t){},835:function(e,t){},924:function(e,t){},936:function(e,t){},981:function(e,t){}},[[739,2,1]]]);
//# sourceMappingURL=main.c8290c0b.chunk.js.map