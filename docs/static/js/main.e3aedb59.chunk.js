(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1024:function(e,t){},1061:function(e,t){},1078:function(e,t){},1335:function(e,t){},1382:function(e,t){},1406:function(e,t){},1443:function(e,t){},1466:function(e,t){},1468:function(e,t){},1479:function(e,t){},1532:function(e,t){},1563:function(e,t){},1627:function(e,t){},1670:function(e,t){},1681:function(e,t){},1683:function(e,t){},1711:function(e,t){},1726:function(e,t){},1759:function(e,t){},1814:function(e,t){},1843:function(e,t,a){"use strict";a.r(t);var n,o=a(11),r=a.n(o),c=a(736),s=a.n(c),i=(a(744),a(195)),l=a(196),u=a(198),m=a(197),p=a(199),d=(a(746),a(737)),b=a.n(d),f=a(738),h=a.n(f),v=0,y=[{title:"first thing",score:0,happy:0,sad:0,id:"bubble-888"},{title:"second thing",score:1,happy:0,sad:3,id:"bubble-999"}];function g(){var e=y.slice();return e.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0}),e}function E(e){n.broadcast(e)}var N=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={peerCount:0,toggle:!0,topBubbles:g()},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;!function(e){var t=e.onBubbleChange,a=e.onPeerChange,o=new b.a({repo:"ipfs/pubsub-demo/"+Math.random(),EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:["/dns4/wrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star"]}}});o.once("ready",function(){return o.id(function(e,r){if(e)throw e;console.log("IPFS node ready with address "+r.id),(n=h()(o,"bbly-news")).on("peer joined",function(e){console.log("peer "+e+" joined"),a(++v)}),n.on("peer left",function(e){console.log("peer "+e+" left"),a(--v)}),n.on("message",function(e){var a=JSON.parse(e.data.toString());if(console.log(a),"vote"!==a.type)"story"===a.type&&(y.push({title:a.title,score:0,happy:0,sad:0,id:a.id}),t());else{for(var n=0;n<y.length;++n)y[n].id===a.id&&("happy"===a.emotion&&y[n].happy++,"sad"===a.emotion&&y[n].sad++,y[n].score=y[n].happy-y[n].sad);t()}})})})}({onBubbleChange:function(){e.setState({topBubbles:g()})},onPeerChange:function(t){e.setState({peerCount:t})}})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement("header",{className:"App-header"},"peers: ",this.state.peerCount,r.a.createElement(j,null),r.a.createElement("br",null),r.a.createElement("ul",{className:"list-group"},this.state.topBubbles.map(function(e){return r.a.createElement("li",{key:e.id,className:"list-group-item"},r.a.createElement(w,{title:e.title,score:e.score,happy:e.happy,sad:e.sad,onHappy:function(){E(JSON.stringify({type:"vote",emotion:"happy",id:e.id}))},onSad:function(){E(JSON.stringify({type:"vote",emotion:"sad",id:e.id}))}}))}))))}}]),t}(o.Component),w=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card border-secondary mb-3 m-3 text-left"},r.a.createElement("div",{className:"card-body"},r.a.createElement("button",{className:"btn btn-outline-secondary m-1"},this.props.score),r.a.createElement("button",{className:"btn btn-outline-secondary m-1",onClick:this.props.onHappy},r.a.createElement("span",{className:"fa fa-smile-o"}," ",this.props.happy," ")),r.a.createElement("button",{className:"btn btn-outline-secondary m-1",onClick:this.props.onSad},r.a.createElement("span",{className:"fa fa-frown-o"}," ",this.props.sad," ")),r.a.createElement("span",{className:"m-3"},this.props.title)))}}]),t}(o.Component),O=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-secondy"},r.a.createElement("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo03","aria-controls":"navbarTogglerDemo03","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("a",{className:"navbar-brand",href:"#!"},"Navbar"),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo03"},r.a.createElement("ul",{className:"navbar-nav mr-auto mt-2 mt-md-0"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement("a",{className:"nav-link",href:"#!"},"Home ",r.a.createElement("span",{className:"sr-only"},"(current)"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"#!"},"Link")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link disabled",href:"#!"},"Disabled"))),r.a.createElement("form",{className:"form-inline my-2 my-lg-0"},r.a.createElement("input",{className:"form-control mr-sm-2",type:"text",placeholder:"Search"}))))}}]),t}(o.Component),j=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o)))).state={value:""},a.handleChange=function(e){a.setState({value:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),console.log("A new story was submitted: "+a.state.value),E(JSON.stringify({type:"story",title:a.state.value,id:"bubble-"+Math.round(1e6*Math.random())}))},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"BubbleBlower"},r.a.createElement("form",{onSubmit:this.handleSubmit,className:"from-inline"},r.a.createElement("div",{className:"input-group mb-2 mr-sm-2 mb-sm-0"},r.a.createElement("input",{type:"text",className:"form-control",id:"inlineFormInputGroup",placeholder:"story title",name:"name",value:this.state.value,onChange:this.handleChange})),r.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-outline-secondary"})))}}]),t}(o.Component),k=N;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},462:function(e,t){},514:function(e,t){},739:function(e,t,a){e.exports=a(1843)},744:function(e,t,a){},746:function(e,t,a){},833:function(e,t){},835:function(e,t){},924:function(e,t){},936:function(e,t){},981:function(e,t){}},[[739,2,1]]]);
//# sourceMappingURL=main.e3aedb59.chunk.js.map