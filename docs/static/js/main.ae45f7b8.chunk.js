(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1026:function(e,t){},1063:function(e,t){},1080:function(e,t){},1337:function(e,t){},1384:function(e,t){},1408:function(e,t){},1445:function(e,t){},1468:function(e,t){},1470:function(e,t){},1481:function(e,t){},1534:function(e,t){},1565:function(e,t){},1629:function(e,t){},1672:function(e,t){},1683:function(e,t){},1685:function(e,t){},1713:function(e,t){},1728:function(e,t){},1761:function(e,t){},1816:function(e,t){},1845:function(e,t,n){"use strict";n.r(t);var a,o=n(28),c=n.n(o),r=n(737),i=n.n(r),s=(n(746),n(381)),l=n(740),u=n(261),b=n(262),m=n(264),d=n(263),f=n(265),p=(n(748),n(738)),h=n.n(p),v=n(739),g=n.n(v),w=0;var y=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={peerCount:0,toggle:!0,bubbleList:[{title:"first thing",score:0,id:"bubble"+Math.random()},{title:"second thing",score:1,id:"bubble"+Math.random()},{title:"third thing",score:2,id:"bubble"+Math.random()}]},n.toggle=function(){n.setState({toggle:!n.state.toggle})},n}return Object(f.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){var e=this;!function(e){var t=e.onAddBubble,n=e.onAddPeer,o=new h.a({repo:"ipfs/pubsub-demo/"+Math.random(),EXPERIMENTAL:{pubsub:!0},config:{Addresses:{Swarm:["/dns4/wrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star"]}}});o.once("ready",function(){return o.id(function(e,c){if(e)throw e;console.log("IPFS node ready with address "+c.id),(a=g()(o,"bbly-news")).on("peer joined",function(e){console.log("peer "+e+" joined"),n(--w)}),a.on("peer left",function(e){console.log("peer "+e+" left"),n(--w)}),a.on("message",function(e){t({title:e.data.toString(),score:0,id:"bubble"+Math.random()}),console.log("got message from "+e.from+": "+e.data.toString())})})})}({onAddBubble:function(t){e.setState({bubbleList:Object(l.a)(e.state.bubbleList).concat([t])})},onAddPeer:function(t){e.setState({peerCount:t})}})}},{key:"handleUpvote",value:function(e){var t=this.state.bubbleList.map(function(t){return t.id===e?Object(s.a)({},t,{score:t.score+1}):t});this.setState({bubbleList:t})}},{key:"handleDownvote",value:function(e){var t=this.state.bubbleList.map(function(t){return t.id===e?Object(s.a)({},t,{score:t.score-1}):t});this.setState({bubbleList:t})}},{key:"render",value:function(){var e=this,t=this.state.bubbleList.slice();return t.sort(function(e,t){return e.score>t.score?-1:e.score<t.score?1:0}),c.a.createElement("div",{className:"App"},c.a.createElement("header",{className:"App-header"},"peers: ",this.state.peerCount,c.a.createElement(j,null),c.a.createElement("br",null),c.a.createElement("ul",{className:"list-group"},t.slice(0,10).map(function(t){return c.a.createElement("li",{key:t.id,className:"list-group-item"},c.a.createElement(E,{title:t.title,score:t.score,onUpvote:function(){return e.handleUpvote(t.id)},onDownvote:function(){return e.handleDownvote(t.id)}}))}))))}}]),t}(o.Component),E=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"card border-secondary mb-3 m-3 text-left"},c.a.createElement("div",{className:"card-body"},c.a.createElement("button",{className:"btn btn-outline-secondary m-1"},this.props.score),c.a.createElement("button",{className:"btn btn-outline-secondary m-1",onClick:this.props.onUpvote},c.a.createElement("span",{className:"fa fa-smile-o"})),c.a.createElement("button",{className:"btn btn-outline-secondary m-1",onClick:this.props.onDownvote},c.a.createElement("span",{className:"fa fa-frown-o"})),c.a.createElement("span",{className:"m-3"},this.props.title)))}}]),t}(o.Component),j=function(e){function t(){var e,n;Object(u.a)(this,t);for(var o=arguments.length,c=new Array(o),r=0;r<o;r++)c[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(c)))).state={value:""},n.handleChange=function(e){n.setState({value:e.target.value})},n.handleSubmit=function(e){var t;console.log("A new story was submitted: "+n.state.value),t=n.state.value,a.broadcast(t),e.preventDefault()},n}return Object(f.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"BubbleBlower"},c.a.createElement("form",{onSubmit:this.handleSubmit,className:"from-inline"},c.a.createElement("div",{className:"input-group mb-2 mr-sm-2 mb-sm-0"},c.a.createElement("input",{type:"text",className:"form-control",id:"inlineFormInputGroup",placeholder:"story title",name:"name",value:this.state.value,onChange:this.handleChange})),c.a.createElement("input",{type:"submit",value:"Submit",className:"btn btn-outline-secondary"})))}}]),t}(o.Component),N=y;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},463:function(e,t){},515:function(e,t){},741:function(e,t,n){e.exports=n(1845)},746:function(e,t,n){},748:function(e,t,n){},835:function(e,t){},837:function(e,t){},926:function(e,t){},938:function(e,t){},983:function(e,t){}},[[741,2,1]]]);
//# sourceMappingURL=main.ae45f7b8.chunk.js.map